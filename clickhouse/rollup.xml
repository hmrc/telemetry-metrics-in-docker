<!-- NOTE:
 * This file will be replaced upon deployment by its equivalent defined in the Terraform repo.
 * Changes made to this file in this repository will therefore not have any effect in a deployed instances.
 * This file is kept in this repository so that this instance can boot successfully when tested in isolation using
   Kitchen.
-->
<clickhouse>
  <graphite_rollup>
    <path_column_name>Path</path_column_name>
    <time_column_name>Time</time_column_name>
    <value_column_name>Value</value_column_name>
    <version_column_name>Timestamp</version_column_name>
    <pattern>
      <regexp>^collectd\..*\.mongo-.*\.(file_size-data|file_size-index|file_size-storage|gauge-collections|gauge-indexes|gauge-num_extents|gauge-object_count)$</regexp>
      <function>avg</function>
      <retention>
        <age>0</age>
        <precision>1200</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.lower$</regexp>
      <function>min</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.upper$</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.sum$</regexp>
      <function>sum</function>
      <retention>
        <age>0</age>
        <precision>1</precision>
      </retention>
      <retention>
        <age>60</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.count$</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>^telemetry\.telescope\.asg\..*</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>3600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>.*\.es-default\..*-index\..*</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>300</precision>
      </retention>
    </pattern>
    <default>
      <function>avg</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </default>
  </graphite_rollup>
</clickhouse>
